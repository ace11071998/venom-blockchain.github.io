(self.webpackChunkve_ps=self.webpackChunkve_ps||[]).push([[9279],{7615:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/validator_round_dark.733a8e4.1030.png 1030w,"+a.p+"assets/ideal-img/validator_round_dark.9fe3b49.1480.png 1480w",images:[{path:a.p+"assets/ideal-img/validator_round_dark.733a8e4.1030.png",width:1030,height:855},{path:a.p+"assets/ideal-img/validator_round_dark.9fe3b49.1480.png",width:1480,height:1229}],src:a.p+"assets/ideal-img/validator_round_dark.733a8e4.1030.png",toString:function(){return a.p+"assets/ideal-img/validator_round_dark.733a8e4.1030.png"},placeholder:void 0,width:1030,height:855},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuklEQVQYlVVQW5IEIQjzFD5aCaDdff8bZhetqdn9SFFiCAmprZv1fVmj6mQdyjqMVb5ocKbqi+V9DtQOYMyiLIGBPZxqx2n45BCwrMXmTlflFQM+t2qqNpnvmxDlDGIXlg6qYL/z+7DOxVRhRwVGg/IaYO5gE+WAMqsxOCn2F3OW59nKOYiX7JUf38dj+LuEUcWdGCAENDPWCNax/45iBBpgM2e/10aba6cPz5vY/twrUNRZ4P/v+Jv6B3sxeG6pQdDzAAAAAElFTkSuQmCC"}},6765:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/validator_round_light.07cf5b2.1030.png 1030w,"+a.p+"assets/ideal-img/validator_round_light.366cb56.1480.png 1480w",images:[{path:a.p+"assets/ideal-img/validator_round_light.07cf5b2.1030.png",width:1030,height:857},{path:a.p+"assets/ideal-img/validator_round_light.366cb56.1480.png",width:1480,height:1231}],src:a.p+"assets/ideal-img/validator_round_light.07cf5b2.1030.png",toString:function(){return a.p+"assets/ideal-img/validator_round_light.07cf5b2.1030.png"},placeholder:void 0,width:1030,height:857},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsUlEQVQYlS2Qi44DIQhF/f9fnbbpZBAE0bPBrQkGw314adfrzXVdvD8fzIy1FplJrsXMPG81o0XMM1BT1kx67wwzpjlzTmZOIoJmNnB3XI2lfkhFyK+SMg6xqkk1qmyfrFthbersSLaM851HhOYelGqBrSs71wGWXSmVfTm2uvbemBr9ESjBDaEDeeSE+QHjKLA3LorfHf8K4xZm/M8Kc8JUgFrFcEdEjqWNgUccxcL8AUAJOOnuCW91AAAAAElFTkSuQmCC"}},4589:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/validator_session_dark.36b2001.1030.png 1030w,"+a.p+"assets/ideal-img/validator_session_dark.8ad7af5.1480.png 1480w",images:[{path:a.p+"assets/ideal-img/validator_session_dark.36b2001.1030.png",width:1030,height:664},{path:a.p+"assets/ideal-img/validator_session_dark.8ad7af5.1480.png",width:1480,height:954}],src:a.p+"assets/ideal-img/validator_session_dark.36b2001.1030.png",toString:function(){return a.p+"assets/ideal-img/validator_session_dark.36b2001.1030.png"},placeholder:void 0,width:1030,height:664},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAhklEQVQImT2OUQ6FMAgEewtptS1QNfruf795wRo/CJtlgE35PJHfhdwXYo6sDdn67I9u5KqkHMMxkK7IeSBNp3afix/Y7TMeIMDaETWkG8uxI2Mn5TCjSp2vAlgbuVRKqTQ1NnNS9jFfx1Uf5GOnmlG7oma4G6sG2B1Rf7O9MUK/i4s5Ee8Pd9tQwteVKpAAAAAASUVORK5CYII="}},4895:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/validator_session_light.1b322fe.1030.png 1030w,"+a.p+"assets/ideal-img/validator_session_light.090d309.1480.png 1480w",images:[{path:a.p+"assets/ideal-img/validator_session_light.1b322fe.1030.png",width:1030,height:665},{path:a.p+"assets/ideal-img/validator_session_light.090d309.1480.png",width:1480,height:956}],src:a.p+"assets/ideal-img/validator_session_light.1b322fe.1030.png",toString:function(){return a.p+"assets/ideal-img/validator_session_light.1b322fe.1030.png"},placeholder:void 0,width:1030,height:665},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAiklEQVQImU2PCQ4CMQhFe/+j6jg6LWXr8g2oiSSEJZ8HlPN84na74zge6J2x1sKc8xsX5loQURTqHcyMMQZaaykaY0JV08PMHIVZsrH3hrvnQNAiN3cE6Loqipml6Gf6X2/ASdBeFaUR5eqgigioEYwYgxVWO/Rs6JU+N4YgyKqGOCXyGE6ISD75Bor16hmtV889AAAAAElFTkSuQmCC"}},4137:(e,t,a)=>{"use strict";a.d(t,{Zo:()=>d,kt:()=>g});var o=a(7294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,o,s=function(e,t){if(null==e)return{};var a,o,s={},n=Object.keys(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var l=o.createContext({}),c=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var a=e.components,s=e.mdxType,n=e.originalType,l=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),p=c(a),g=s,m=p["".concat(l,".").concat(g)]||p[g]||h[g]||n;return a?o.createElement(m,i(i({ref:t},d),{},{components:a})):o.createElement(m,i({ref:t},d))}));function g(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var n=a.length,i=new Array(n);i[0]=p;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"==typeof e?e:s,i[1]=r;for(var c=2;c<n;c++)i[c]=a[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}p.displayName="MDXCreateElement"},3067:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var o=a(7294),s=a(9200);const n=e=>{let{lightImageSrc:t,darkImageSrc:a,alt:n}=e;const{isDarkTheme:i}=(0,s.I)();return o.createElement("img",{src:i?a.src:t.src,alt:n})}},4877:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>k,contentTitle:()=>u,default:()=>A,frontMatter:()=>m,metadata:()=>v,toc:()=>f});var o=a(7462),s=(a(7294),a(4137)),n=a(3067),i=a(4589),r=a.n(i),l=a(4895),c=a.n(l),d=a(7615),h=a.n(d),p=a(6765),g=a.n(p);const m={sidebar_position:3,sidebar_label:"Consensus",slug:"/learn/consensus"},u="Consensus",v={unversionedId:"start/learn/consensus",id:"start/learn/consensus",title:"Consensus",description:"The primary goal of the consensus protocol is to provide a mechanism for all the parties involved in the network to reach an agreement on the current state of the blockchain and to ensure that all the transactions included in a block are valid and that the blockchain state is updated consistently and securely on all levels (shardchains, workchains, and masterchain).",source:"@site/docs/start/learn/consensus.md",sourceDirName:"start/learn",slug:"/learn/consensus",permalink:"/learn/consensus",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Consensus",slug:"/learn/consensus"},sidebar:"docsSidebar",previous:{title:"Architecture",permalink:"/learn/architecture"},next:{title:"Threaded Virtual Machine",permalink:"/learn/tvm"}},k={},f=[{value:"Overview",id:"overview",level:2},{value:"Delegated staking pools",id:"delegated-staking-pools",level:3},{value:"Validator sets",id:"validator-sets",level:3},{value:"Components",id:"components",level:2},{value:"Election",id:"election",level:3},{value:"The Validator Session",id:"the-validator-session",level:4},{value:"Block Generation",id:"block-generation",level:3},{value:"Consensus algorithm",id:"consensus-algorithm",level:3},{value:"Message Passing Protocol",id:"message-passing-protocol",level:3}],b={toc:f};function A(e){let{components:t,...a}=e;return(0,s.kt)("wrapper",(0,o.Z)({},b,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"consensus"},"Consensus"),(0,s.kt)("p",null,"The primary goal of the consensus protocol is to provide a mechanism for all the parties involved in the network to reach an agreement on the current state of the blockchain and to ensure that all the transactions included in a block are valid and that the blockchain state is updated consistently and securely on all levels (shardchains, workchains, and masterchain)."),(0,s.kt)("h2",{id:"overview"},"Overview"),(0,s.kt)("p",null,"The Venom blockchain utilizes a Proof of Stake (PoS) consensus mechanism with The Byzantine fault-tolerant (BFT) algorithm to reach a consensus agreement between validators. This approach ensures network security and provides Sybil resistance."),(0,s.kt)("p",null,"The validator maintains the network's security by staking its VENOM tokens and committing to participate in consensus rounds with other validators. By staking their tokens, validators demonstrate a vested interest in the network's wellbeing and help to achieve Sybil resistance. The more tokens staked on the network, the more difficult it becomes for an attacker to create multiple identities and gain control over the network."),(0,s.kt)("p",null,"The validator proposes candidate blocks and votes on blocks proposed by other validators, utilizing the Byzantine fault-tolerant (BFT) algorithm to ensure a reliable consensus process. The protocol proceeds through a series of rounds, each with a set of validator nodes responsible for proposing, validating, and committing blocks. If a proposed block receives approval from 2/3 of the validator nodes, it commits to the blockchain. If the proposed block does not receive approval in a specific time, it is skipped, and the next round begins."),(0,s.kt)("p",null,"Consensus algorithms can be broadly divided into two classes: those that allow for the creation of multiple chains at the same time (forks) and those that do not allow for forks. In other words, a consensus may have probabilistic or deterministic finality."),(0,s.kt)("p",null,"Deterministic finality refers to the idea that once a transaction has been committed in a block and added to the blockchain, it is considered final and cannot be reversed. This is important for the security and integrity of the network, as it ensures that transactions cannot be altered once they have been recorded on the blockchain. For example, in the context of Bitcoin, a transaction is considered to be final only in probabilistic nature. The transaction's reverse probability decreases as more blocks are added to the chain after it."),(0,s.kt)("p",null,"The Venom Consensus Protocol belongs to the deterministic finality class of algorithms. It ensures the finality of transactions at the commitment stage. Using a BFT makes it almost improbable for forks to occur, as they can only happen in the event of incorrect behavior by a majority of validators."),(0,s.kt)("h3",{id:"delegated-staking-pools"},"Delegated staking pools"),(0,s.kt)("p",null,"Participants with minimum VENOM can participate in the validation process through delegated staking pools. This mechanism allows network participants to delegate their stake to other participants or organizations who will serve as validators. Token holders can stake their tokens in specific validators \u2014 the more tokens staked in a validator, the more weight it carries in the consensus voting process. It gives token holders a say in who becomes a validator by choosing which validator candidates to delegate their stake. This helps to ensure that the validator set is representative of the interests and goals of the broader community."),(0,s.kt)("h3",{id:"validator-sets"},"Validator sets"),(0,s.kt)("p",null,"There are three main types of validator sets:"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Overall validator set"),". The weight-sorted validator list of all validators chosen to participate in the validation process."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Masterchain validator set"),". The list of validators with the largest stake is chosen from the overall validator set."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Shardchain validator set"),". The group of validators chosen from the overall validator set maintains block processing for a specific shardchain."),(0,s.kt)("p",null,"The protocol uses a round-robin role transfer system where validators take turns generating blocks to prevent a single group from monopolizing consensus. The consensus algorithm is executed by each shard using its group of validators."),(0,s.kt)("h2",{id:"components"},"Components"),(0,s.kt)("p",null,"The consensus protocol can be decomposed into several distinct components, each responsible for a specific protocol aspect:"),(0,s.kt)("p",null,"1) ",(0,s.kt)("strong",{parentName:"p"},"Election"),": A selection of the overall validator set;",(0,s.kt)("br",{parentName:"p"}),"\n","2) ",(0,s.kt)("strong",{parentName:"p"},"Block")," ",(0,s.kt)("strong",{parentName:"p"},"Generation"),": A creation and verification of blocks;",(0,s.kt)("br",{parentName:"p"}),"\n","3) ",(0,s.kt)("strong",{parentName:"p"},"Consensus"),": A reaching consensus;",(0,s.kt)("br",{parentName:"p"}),"\n","4) ",(0,s.kt)("strong",{parentName:"p"},"Message")," ",(0,s.kt)("strong",{parentName:"p"},"Passing")," ",(0,s.kt)("strong",{parentName:"p"},"Protocol"),": A passaging messages between validators."),(0,s.kt)("h3",{id:"election"},"Election"),(0,s.kt)("p",null,"First, the consensus protocol must determine which participants are eligible to serve as validators through the election process. The smart contract implements a proof of stake-based election algorithm for selecting a weight-sorted validator list, where the stake determines the weight."),(0,s.kt)("p",null,"The election contract uses various factors to select validators, including the validator's stake size, the min/max number of validators allowed, the min/max stake size, and the maximum difference between the largest and smallest validator stakes. This accounting for these factors helps to ensure network security by maximizing the stake amount and the number of active validators."),(0,s.kt)("p",null,"The election process gives the overall validator set to start the validator session. The selected validator set generates blocs by following the consensus algorithm during the validator session."),(0,s.kt)("h4",{id:"the-validator-session"},"The Validator Session"),(0,s.kt)("p",null,"The Validator Session goes through several rounds of block generation. During block generation rounds, the validator executes the consensus algorithm, resulting in committing the elected block to the blockchain."),(0,s.kt)("p",null,"Validators will have several attempts to commit a valid block to the network before it is considered a failure, and the process must start over with new lead validators. During each attempt, a limited number of validators can propose a block for consideration by the rest of the network."),(0,s.kt)("p",null,"If a validator misses their turn or produces an invalid block, they may be punished by having their stake slashed."),(0,s.kt)(n.Z,{lightImageSrc:c(),darkImageSrc:r(),alt:"Validator session",mdxType:"ImageSwitcher"}),(0,s.kt)("h3",{id:"block-generation"},"Block Generation"),(0,s.kt)("p",null,"Before a validator proposes a block to the network, it must first collect and ensure that the block is well-formed and valid according to the block generation rules. These rules include the size of the block, the volume of transactions that can be included in a block, the time between blocks, the block header and transaction format, etc. The block generation component is ensured for creating and validating new blocks in a blockchain network."),(0,s.kt)("h3",{id:"consensus-algorithm"},"Consensus algorithm"),(0,s.kt)("p",null,"Byzantine Fault Tolerant (BFT) algorithm is part of the block generation round and is responsible for reaching an agreement on block production."),(0,s.kt)("p",null,"The consensus process includes several stages of reaching an agreement:"),(0,s.kt)("p",null,"1) ",(0,s.kt)("strong",{parentName:"p"},"Candidate block generation"),": Validators, which have block generation priority for the round, generate a new candidate block. The candidate is sent to the ",(0,s.kt)("em",{parentName:"p"},"Approve")," phase to other validator nodes as soon as the candidate is generated."),(0,s.kt)("p",null,"2) ",(0,s.kt)("strong",{parentName:"p"},"Candidate block approval"),": The candidate block is collected and checked for corruption by each validator node. If a block is approved, it is signed for approval by each validator and broadcast to the network. A block is considered approved by a node when it receives more than 2/3 of the approval messages and goes to the ",(0,s.kt)("em",{parentName:"p"},"Vote")," phase."),(0,s.kt)("p",null,"3) ",(0,s.kt)("strong",{parentName:"p"},"Voting attempts"),": Several voting attempts are carried out, each with a time limit. The lead validator for the attempt selects a candidate block for voting, and other nodes are notified. Each validator node then sets a block to vote for according to the leader validator's a proposed block. A validator is not required to vote for the proposed block and can choose a different one, but a priority block is preferred due to speed performance. If any approved block receives more than 2/3 of the total validator weights during the voting process, it becomes the candidate for signing (",(0,s.kt)("em",{parentName:"p"},"pre-commit")," block). If two attempts propose different pre-commit blocks, the latest one prevails."),(0,s.kt)("p",null,"4) ",(0,s.kt)("strong",{parentName:"p"},"Block committing"),": The signing begins as soon as a round attempt yields a pre-committed block. The validator that gets the pre-committed block in the current round signs it and broadcasts it to other validators. When a particular validator receives more than 2/3 signatures from other validators, it switches to the next round, and ",(0,s.kt)("em",{parentName:"p"},"commits")," the signed block to the blockchain. If no block is committed in the current round, the round is considered failed, and the process moves to the next round."),(0,s.kt)(n.Z,{lightImageSrc:g(),darkImageSrc:h(),alt:"Validator round",mdxType:"ImageSwitcher"}),(0,s.kt)("h3",{id:"message-passing-protocol"},"Message Passing Protocol"),(0,s.kt)("p",null,"The message-passing protocol is the network-layer protocol used for communication and coordination among the validator nodes in the network. Validators use it to broadcast messages containing candidate blocks, approvals, votes, and signed blocks to other nodes in the network. It is also used to synchronize the validator session state among the nodes in the network. The message-passing protocol does not implement the consensus algorithm itself. However, it serves as a means of communication and coordination for the validator session higher-level component responsible for making decisions related to the consensus process."),(0,s.kt)("p",null,(0,s.kt)("em",{parentName:"p"},"Note messages discussed in this section are not the same messages which accounts send to each other. Messages of this protocol are network-layer messages and don't have on-chain representation.")),(0,s.kt)("p",null,"The Message Passing Protocol gives a way to synchronize the chain's state and communicate to reach a consensus agreement."))}A.isMDXComponent=!0}}]);