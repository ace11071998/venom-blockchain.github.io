"use strict";(self.webpackChunkve_ps=self.webpackChunkve_ps||[]).push([[4943],{4137:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>d});var n=a(7294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,r=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),h=l(a),d=s,m=h["".concat(c,".").concat(d)]||h[d]||p[d]||r;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function d(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=a.length,o=new Array(r);o[0]=h;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:s,o[1]=i;for(var l=2;l<r;l++)o[l]=a[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},396:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var n=a(7462),s=(a(7294),a(4137));const r={sidebar_position:6,sidebar_label:"Messages and Transactions",slug:"/learn/messages-and-transactions"},o="Messages and Transactions",i={unversionedId:"start/learn/messages-and-transactions",id:"start/learn/messages-and-transactions",title:"Messages and Transactions",description:"All interactions with the Venom network are carried out through messages.",source:"@site/docs/start/learn/messages-and-transactions.md",sourceDirName:"start/learn",slug:"/learn/messages-and-transactions",permalink:"/learn/messages-and-transactions",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,sidebar_label:"Messages and Transactions",slug:"/learn/messages-and-transactions"},sidebar:"docsSidebar",previous:{title:"Accounts",permalink:"/learn/accounts"},next:{title:"Gas and fees",permalink:"/learn/transaction-fees"}},c={},l=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Message",id:"message",level:2},{value:"Message types",id:"message-types",level:3},{value:"Message structure",id:"message-structure",level:3},{value:"Transaction",id:"transaction",level:3},{value:"Transaction phases",id:"transaction-phases",level:3}],u={toc:l};function p(e){let{components:t,...r}=e;return(0,s.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"messages-and-transactions"},"Messages and Transactions"),(0,s.kt)("p",null,"All interactions with the Venom network are carried out through messages."),(0,s.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,s.kt)("p",null,"To help you better understand this page, we recommend you first read ",(0,s.kt)("a",{parentName:"p",href:"/learn/accounts"},"Accounts"),"."),(0,s.kt)("h2",{id:"message"},"Message"),(0,s.kt)("p",null,"A message sent to an account triggers the creation of a transaction that modifies the account's state. The message includes instructions for executing a smart contract (an account)."),(0,s.kt)("h3",{id:"message-types"},"Message types"),(0,s.kt)("p",null,"The Venom network has three different types of messages:"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Inbound external message:")," a message sent from outside the blockchain into the blockchain. These messages don't have a 'from' address and can be sent by regular users, external services and any participants outside the blockchain, known as \"messages from nowhere\". Inbound external messages initiate changes to the state of the blockchain."),(0,s.kt)("p",null,"The external message can not be the value-bearing message from one participant to another, it only can declare intent to transfer value to another account."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Internal message:")," a message sent from one contract to another. Like an inbound external message, it updates the state of the Venom network."),(0,s.kt)("p",null,"Only an Internal message can be a value-bearing message."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Outbound external message:"),' Known as a "',(0,s.kt)("em",{parentName:"p"},"message to nowhere"),'" or "',(0,s.kt)("em",{parentName:"p"},"event"),'". This is a message that can be emitted by a smart contract. Off-chain participants can subscribe to events within the Venom network and receive them.'),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Messages",src:a(583).Z,width:"2128",height:"2540"})),(0,s.kt)("h3",{id:"message-structure"},"Message structure"),(0,s.kt)("p",null,"A message consists of such parts as '",(0,s.kt)("em",{parentName:"p"},"header'")," and '",(0,s.kt)("em",{parentName:"p"},"body'.")),(0,s.kt)("p",null,"The header contains the information about a sender, receiver, value, and the information necessary required by the validator to apply the message to the block."),(0,s.kt)("p",null,"The message body comprises the payload of virtual machine instructions that are necessary to execute the smart contract."),(0,s.kt)("h3",{id:"transaction"},"Transaction"),(0,s.kt)("p",null,"A transaction is a direct result of the processing of exactly one inbound message by a recipient account code. When an inbound message is received by an account, it leads to the computation of the account's new state and the possibility of generating one or more outbound messages with the account serving as the source. The inbound message and the previous state of the account serve as inputs for the transaction, while the generated outbound messages and the next state of the account serve as outputs. This relation can be represented as a Directed Acyclic Graph (DAG)."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Messages",src:a(3015).Z,width:"3192",height:"2478"})),(0,s.kt)("h3",{id:"transaction-phases"},"Transaction phases"),(0,s.kt)("p",null,"A transaction is a multi-step process composed of several distinct phases, each with its specific purpose. Each phase is a logical step in the message execution and may either complete successfully or result in an error. If an error occurs, the next stage not be executed."),(0,s.kt)("p",null,"The purpose of the credit phase is to add the value of the received internal message to the account's balance."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"The storage phase")," is responsible for collecting storage payments for the account state, which includes the smart contract code and data. The storage phase is absent if the transaction is sent to deploy a new smart contract, which did not exist before. During this phase, the smart contract may be frozen if its balance is insufficient to pay the storage fee."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"The computing phase")," is where the smart contract code is invoked inside an instance of TVM with appropriate parameters, including the inbound message and the account's persistent data. This phase terminates with an exit code, new persistent data, and an action list, which includes outbound messages to be sent. The processing phase may lead to creating a new account (uninitialized or active) or activating a previously uninitialized or frozen account. The gas payment, equal to the product of the gas price and the gas consumed, is exacted from the account balance."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"The action phase")," is where the actions from the action list are performed if the smart contract is terminated successfully (with exit code 0 or 1). Suppose it is impossible to perform all the actions, for example, because of insufficient funds to transfer with an outbound message. In that case, the transaction is aborted, and the account state is rolled back."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"The Bounce phase")," is triggered when a transaction is aborted, and the inbound message has its bounce flag set. This phase involves automatically generating an outbound message, with the bounce flag clear, and sending it back to the original sender. The value of the original inbound message, minus any gas payments and forwarding fees, is transferred to this generated message, which has an empty body."),(0,s.kt)("p",null,"The execution of a transaction requires payment of various types of fees. Each kind of fee serves a purpose, such as incentivizing validators to maintain the correct operation of the network, perform transaction execution, and store contract data on their nodes. Also, it serves as a measure to restrict spamming and malicious attempts to slow down the network."),(0,s.kt)("p",null,"Note an external message is not a value-bearing message. Only an internal message can transfer value between accounts and increase its balance in the credit phase, and only after that are all fee payments due from the account balance."))}p.isMDXComponent=!0},583:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/messages-0eb0d7b900c8a7e478918900040a0d49.png"},3015:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/transactions-a5fccbec3811e41e9e9dd9ec928fa384.png"}}]);